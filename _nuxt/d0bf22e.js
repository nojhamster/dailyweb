(window.webpackJsonp=window.webpackJsonp||[]).push([[11,6,7,9,10],{375:function(e,t,r){"use strict";r.r(t);r(21),r(14);var n={props:{size:{type:Number,default:function(){return 32}},color:{type:String,default:function(){return"primary"}},member:{type:Object,default:function(){return{}}}},computed:{avatarUrl:function(){var e,t;return(null===(e=this.member)||void 0===e?void 0:e.avatarUrl)&&"".concat(null===(t=this.member)||void 0===t?void 0:t.avatarUrl,"/50.png")},fullName:function(){var e;return null===(e=this.member)||void 0===e?void 0:e.fullName},username:function(){var e;return null===(e=this.member)||void 0===e?void 0:e.username},initials:function(){var e;return null===(e=this.member)||void 0===e?void 0:e.initials},combinedName:function(){return"".concat(this.fullName," (").concat(this.username,")")}}},l=r(70),o=r(103),c=r.n(o),v=r(165),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-avatar",{attrs:{size:e.size,color:e.color,title:e.combinedName}},[e.avatarUrl?r("img",{attrs:{src:e.avatarUrl,alt:e.fullName}}):r("span",{domProps:{textContent:e._s(e.initials)}})])}),[],!1,null,null,null);t.default=component.exports;c()(component,{VAvatar:v.a})},378:function(e,t,r){"use strict";r.r(t);r(46),r(71);var n=r(383),l=r.n(n),o=r(384),c=r.n(o),v={components:{TrelloAvatar:r(375).default},props:{lists:{type:Array,default:function(){return[]}},members:{type:Array,default:function(){return[]}},labels:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,card:null}},computed:{list:function(){var e=this;return Array.isArray(this.lists)&&this.card?this.lists.find((function(t){return t.id===e.card.idList})):null},cardMembers:function(){var e,t=this;return Array.isArray(this.members)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idMembers)?this.members.filter((function(e){return t.card.idMembers.find((function(t){return t===e.id}))})):null},cardLabels:function(){var e,t=this;return Array.isArray(this.labels)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idLabels)?this.labels.filter((function(label){return t.card.idLabels.find((function(e){return e===label.id}))})):null},htmlDesc:function(){return c.a.sanitize(l()(this.card.desc))}},methods:{showCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.card=e,this.show=!0}}},d=r(70),h=r(103),m=r.n(h),_=r(161),f=r(134),y=r(385),x=r(459),k=r(373),w=r(460),component=Object(d.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"900"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.card?r("v-card",[r("v-card-title",[e._v("\n      "+e._s(e.card.name)+"\n    ")]),e._v(" "),e.list?r("v-card-subtitle",[e._v("\n      Dans la liste "+e._s(e.list.name)+"\n    ")]):e._e(),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",[r("div",{staticClass:"subtitle-1"},[e._v("\n            Membres\n          ")]),e._v(" "),e._l(e.cardMembers,(function(e){return r("TrelloAvatar",{key:e.id,staticClass:"mr-1 my-1",attrs:{member:e,size:32,color:"primary"}})}))],2),e._v(" "),r("v-col",[r("div",{staticClass:"subtitle-1"},[e._v("\n            Étiquettes\n          ")]),e._v(" "),e._l(e.cardLabels,(function(label){return r("v-chip",{key:label.id,staticClass:"mr-1 my-1",attrs:{color:label.color,label:"",dark:""}},[e._v("\n            "+e._s(label.name)+"\n          ")])}))],2)],1)],1),e._v(" "),r("v-card-title",[e._v("\n      Description\n    ")]),e._v(" "),e.htmlDesc?r("v-card-text",{domProps:{innerHTML:e._s(e.htmlDesc)}}):r("v-card-text",[r("p",[e._v("Pas de description")])])],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{TrelloAvatar:r(375).default}),m()(component,{VCard:_.a,VCardSubtitle:f.b,VCardText:f.c,VCardTitle:f.d,VChip:y.a,VCol:x.a,VDialog:k.a,VRow:w.a})},379:function(e,t,r){"use strict";r.r(t);r(46),r(71);var n={components:{TrelloAvatar:r(375).default},props:{lists:{type:Array,default:function(){return[]}},members:{type:Array,default:function(){return[]}},labels:{type:Array,default:function(){return[]}},card:{type:Object,default:function(){return{}}}},computed:{list:function(){var e=this;return Array.isArray(this.lists)&&this.card?this.lists.find((function(t){return t.id===e.card.idList})):null},cardMembers:function(){var e,t=this;return Array.isArray(this.members)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idMembers)?this.members.filter((function(e){return t.card.idMembers.find((function(t){return t===e.id}))})):null},cardLabels:function(){var e,t=this;return Array.isArray(this.labels)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idLabels)?this.labels.filter((function(label){return t.card.idLabels.find((function(e){return e===label.id}))})):null}},methods:{}},l=r(70),o=r(103),c=r.n(o),v=r(361),d=r(161),h=r(134),m=r(385),_=r(162),f=r(371),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v("\n    "+e._s(e.card.name)+"\n  ")]),e._v(" "),e.list?r("v-card-subtitle",[e._v("\n    Dans la liste "+e._s(e.list.name)+"\n  ")]):e._e(),e._v(" "),e.cardLabels.length>0?r("v-card-text",e._l(e.cardLabels,(function(label){return r("v-chip",{key:label.id,staticClass:"mr-1 my-1",attrs:{color:label.color,small:"",label:"",dark:""}},[e._v("\n      "+e._s(label.name)+"\n    ")])})),1):e._e(),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{text:"",href:e.card.url,target:"_blank"}},[r("v-icon",{attrs:{left:""}},[e._v("\n        mdi-trello\n      ")]),e._v("\n      Voir sur Trello\n    ")],1),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("showDetails",e.card)}}},[r("v-icon",{attrs:{left:""}},[e._v("\n        mdi-eye-outline\n      ")]),e._v("\n      Détails\n    ")],1),e._v(" "),r("v-spacer"),e._v(" "),e._l(e.cardMembers,(function(e){return r("TrelloAvatar",{key:e.id,staticClass:"mr-1 my-1",attrs:{member:e,size:32,color:"primary"}})}))],2)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{TrelloAvatar:r(375).default}),c()(component,{VBtn:v.a,VCard:d.a,VCardActions:h.a,VCardSubtitle:h.b,VCardText:h.c,VCardTitle:h.d,VChip:m.a,VIcon:_.a,VSpacer:f.a})},381:function(e,t,r){r(6)({target:"Number",stat:!0},{isInteger:r(382)})},382:function(e,t,r){var n=r(23),l=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&l(e)===e}},402:function(e,t,r){"use strict";r.r(t);r(21),r(14);var n={props:{usedTime:{type:Number,default:function(){return 0}},availableTime:{type:Number,default:function(){return 120}}},computed:{percent:function(){return Math.min(this.usedTime/this.availableTime*100,100)},time:function(){var e=this.usedTime,t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),n=e-3600*t-60*r;return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),"00"===t?"".concat(r,":").concat(n):"".concat(t,":").concat(r,":").concat(n)}}},l=r(70),o=r(103),c=r.n(o),v=r(160),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-progress-circular",{staticClass:"my-8 timer",attrs:{rotate:90,size:150,width:10,value:e.percent,color:"primary"}},[e._v("\n  "+e._s(e.time)+"\n")])}),[],!1,null,null,null);t.default=component.exports;c()(component,{VProgressCircular:v.a})},403:function(e,t,r){"use strict";r.r(t);r(21),r(46),r(34),r(73),r(40),r(24),r(41),r(171),r(88);var n=r(18),l=r(378),o=r(379),c=r(375),v={components:{TrelloCardDialog:l.default,TrelloCard:o.default,TrelloAvatar:c.default},props:{boardId:{type:String,default:function(){return""}},apiKey:{type:String,default:function(){return""}},accessToken:{type:String,default:function(){return""}}},data:function(){return{search:"",board:null,loading:!1,error:null,selectedMembers:[],selectedLists:[],selectedLabels:[]}},computed:{boardName:function(){var e;return null===(e=this.board)||void 0===e?void 0:e.name},hasError:function(){return!!this.error},errorMessage:function(){var e;return null===(e=this.error)||void 0===e?void 0:e.message},lists:function(){var e;return Array.isArray(null===(e=this.board)||void 0===e?void 0:e.lists)?this.board.lists:[]},labels:function(){var e;return Array.isArray(null===(e=this.board)||void 0===e?void 0:e.labels)?this.board.labels:[]},members:function(){var e;return Array.isArray(null===(e=this.board)||void 0===e?void 0:e.members)?this.board.members:[]},cards:function(){var e,t=this,r=Array.isArray(null===(e=this.board)||void 0===e?void 0:e.cards)?this.board.cards:[],n=this.search.toLowerCase();return r.sort((function(a,b){return a.dateLastActivity<b.dateLastActivity?1:-1})).filter((function(e){if(n&&!e.name.toLowerCase().includes(n))return!1;if(t.selectedLists.length>0&&!t.selectedLists.includes(e.idList))return!1;if(t.selectedMembers.length>0){if(!Array.isArray(e.idMembers))return!1;if(!t.selectedMembers.some((function(t){return e.idMembers.includes(t)})))return!1}if(t.selectedLabels.length>0){if(!Array.isArray(e.idLabels))return!1;if(!t.selectedLabels.some((function(t){return e.idLabels.includes(t)})))return!1}return!0})).slice(0,25)}},mounted:function(){this.boardId&&this.fetchCards()},methods:{showCard:function(e){this.$refs.cardViewer.showCard(e)},fetchCards:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.error=null,r={},e.apiKey&&e.accessToken&&(r.Authorization='OAuth oauth_consumer_key="'.concat(e.apiKey,'", oauth_token="').concat(e.accessToken,'"')),t.prev=4,t.next=7,e.$axios.get("https://api.trello.com/1/boards/".concat(e.boardId),{headers:r,params:{cards:"visible",lists:"open",members:"all",labels:"all",label_fields:"name,color",member_fields:"username,avatarUrl,fullName,initials",card_fields:"name,desc,url,dateLastActivity,idList,idMembers,idLabels",list_fields:"name"}});case 7:n=t.sent,e.board=n.data,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),e.error=t.t0;case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[4,11]])})))()}}},d=r(70),h=r(103),m=r.n(h),_=r(468),f=r(461),y=r(361),x=r(161),k=r(134),w=r(385),A=r(459),C=r(164),T=r(85),V=r(460),S=r(371),I=r(412),L=r(462),O=r(463),j=r(39),M=r(170),component=Object(d.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.boardId?r("v-card",[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[e._v("\n      "+e._s(e.boardName)+"\n    ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{staticClass:"mr-3",staticStyle:{"max-width":"200px"},attrs:{name:"search",label:"Recherche",solo:"",dense:"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.fetchCards}},[e._v("\n      Actualiser\n    ")])],1),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-autocomplete",{attrs:{items:e.lists,"item-text":"name","item-value":"id",label:"Listes","hide-details":"",outlined:"",multiple:"",clearable:""},model:{value:e.selectedLists,callback:function(t){e.selectedLists=t},expression:"selectedLists"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-autocomplete",{attrs:{items:e.members,"item-text":"fullName","item-value":"id",label:"Membres","hide-details":"",outlined:"",multiple:"",clearable:""},scopedSlots:e._u([{key:"selection",fn:function(data){return[r("TrelloAvatar",{staticClass:"mr-1",attrs:{member:data.item}})]}},{key:"item",fn:function(data){return[r("v-list-item-avatar",[r("TrelloAvatar",{attrs:{member:data.item}})],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(data.item.fullName)}}),e._v(" "),r("v-list-item-subtitle",{domProps:{textContent:e._s(data.item.username)}})],1)]}}],null,!1,2222735841),model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-autocomplete",{attrs:{items:e.labels,"item-text":"name","item-value":"id",label:"Étiquettes","hide-details":"",outlined:"",multiple:"",clearable:""},scopedSlots:e._u([{key:"selection",fn:function(data){return[r("v-chip",{staticClass:"mr-1 my-1",attrs:{color:data.item.color,label:"",dark:""}},[e._v("\n              "+e._s(data.item.name)+"\n            ")])]}}],null,!1,1065837416),model:{value:e.selectedLabels,callback:function(t){e.selectedLabels=t},expression:"selectedLabels"}})],1)],1)],1),e._v(" "),r("v-card-title",[e._v("\n    Activité\n  ")]),e._v(" "),r("v-card-text",[r("v-alert",{attrs:{type:"error",outlined:"",value:e.hasError}},[e._v("\n      Le chargement de l'activité Trello a échoué.\n      "),r("pre",[e._v(e._s(e.errorMessage))])]),e._v(" "),e.cards.length>0?r("v-timeline",{attrs:{dense:""}},e._l(e.cards,(function(t){return r("v-timeline-item",{key:t.id,attrs:{small:""}},[r("TrelloCard",{attrs:{card:t,lists:e.lists,members:e.members,labels:e.labels},on:{showDetails:function(r){return e.showCard(t)}}})],1)})),1):e._e()],1),e._v(" "),r("TrelloCardDialog",{ref:"cardViewer",attrs:{lists:e.lists,members:e.members,labels:e.labels}})],1):e._e()}),[],!1,null,null,null);t.default=component.exports;m()(component,{TrelloAvatar:r(375).default,TrelloCard:r(379).default,TrelloCardDialog:r(378).default}),m()(component,{VAlert:_.a,VAutocomplete:f.a,VBtn:y.a,VCard:x.a,VCardText:k.c,VCardTitle:k.d,VChip:w.a,VCol:A.a,VListItemAvatar:C.a,VListItemContent:T.a,VListItemSubtitle:T.b,VListItemTitle:T.c,VRow:V.a,VSpacer:S.a,VTextField:I.a,VTimeline:L.a,VTimelineItem:O.a,VToolbar:j.a,VToolbarTitle:M.a})},411:function(e,t,r){var content=r(448);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("574db41c",content,!0,{sourceMap:!1})},447:function(e,t,r){"use strict";r(411)},448:function(e,t,r){var n=r(8)(!1);n.push([e.i,".timer[data-v-152d6a28]{font-size:2em}",""]),e.exports=n},449:function(e,t,r){var content=r(450);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("421e27d6",content,!0,{sourceMap:!1})},450:function(e,t,r){var n=r(8)(!1);n.push([e.i,".theme--light.v-stepper{background:#fff}.theme--light.v-stepper .v-stepper__step:not(.v-stepper__step--active):not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__step__step{background:rgba(0,0,0,.38)}.theme--light.v-stepper .v-stepper__step__step,.theme--light.v-stepper .v-stepper__step__step .v-icon{color:#fff}.theme--light.v-stepper .v-stepper__header .v-divider{border-color:rgba(0,0,0,.12)}.theme--light.v-stepper .v-stepper__step--active .v-stepper__label{text-shadow:0 0 0 #000}.theme--light.v-stepper .v-stepper__step--editable:hover{background:rgba(0,0,0,.06)}.theme--light.v-stepper .v-stepper__step--editable:hover .v-stepper__label{text-shadow:0 0 0 #000}.theme--light.v-stepper .v-stepper__step--complete .v-stepper__label{color:rgba(0,0,0,.87)}.theme--light.v-stepper .v-stepper__step--inactive.v-stepper__step--editable:not(.v-stepper__step--error):hover .v-stepper__step__step{background:rgba(0,0,0,.54)}.theme--light.v-stepper .v-stepper__label{color:rgba(0,0,0,.38)}.theme--light.v-stepper--non-linear .v-stepper__step:not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__label,.theme--light.v-stepper .v-stepper__label small{color:rgba(0,0,0,.6)}.v-application--is-ltr .theme--light.v-stepper--vertical .v-stepper__content:not(:last-child){border-left:1px solid rgba(0,0,0,.12)}.v-application--is-rtl .theme--light.v-stepper--vertical .v-stepper__content:not(:last-child){border-right:1px solid rgba(0,0,0,.12)}.theme--dark.v-stepper{background:#303030}.theme--dark.v-stepper .v-stepper__step:not(.v-stepper__step--active):not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__step__step{background:hsla(0,0%,100%,.5)}.theme--dark.v-stepper .v-stepper__step__step,.theme--dark.v-stepper .v-stepper__step__step .v-icon{color:#fff}.theme--dark.v-stepper .v-stepper__header .v-divider{border-color:hsla(0,0%,100%,.12)}.theme--dark.v-stepper .v-stepper__step--active .v-stepper__label{text-shadow:0 0 0 #fff}.theme--dark.v-stepper .v-stepper__step--editable:hover{background:hsla(0,0%,100%,.06)}.theme--dark.v-stepper .v-stepper__step--editable:hover .v-stepper__label{text-shadow:0 0 0 #fff}.theme--dark.v-stepper .v-stepper__step--complete .v-stepper__label{color:hsla(0,0%,100%,.87)}.theme--dark.v-stepper .v-stepper__step--inactive.v-stepper__step--editable:not(.v-stepper__step--error):hover .v-stepper__step__step{background:hsla(0,0%,100%,.75)}.theme--dark.v-stepper .v-stepper__label{color:hsla(0,0%,100%,.5)}.theme--dark.v-stepper--non-linear .v-stepper__step:not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__label,.theme--dark.v-stepper .v-stepper__label small{color:hsla(0,0%,100%,.7)}.v-application--is-ltr .theme--dark.v-stepper--vertical .v-stepper__content:not(:last-child){border-left:1px solid hsla(0,0%,100%,.12)}.v-application--is-rtl .theme--dark.v-stepper--vertical .v-stepper__content:not(:last-child){border-right:1px solid hsla(0,0%,100%,.12)}.v-stepper{border-radius:4px;overflow:hidden;position:relative}.v-stepper,.v-stepper__header{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-stepper__header{height:72px;align-items:stretch;display:flex;flex-wrap:wrap;justify-content:space-between}.v-stepper__header .v-divider{align-self:center;margin:0 -16px}.v-stepper__items{position:relative;overflow:hidden}.v-stepper__step__step{align-items:center;border-radius:50%;display:inline-flex;font-size:.75rem;justify-content:center;height:24px;min-width:24px;width:24px;transition:.3s cubic-bezier(.25,.8,.25,1)}.v-application--is-ltr .v-stepper__step__step{margin-right:8px}.v-application--is-rtl .v-stepper__step__step{margin-left:8px}.v-stepper__step__step .v-icon.v-icon{font-size:1.25rem}.v-stepper__step__step .v-icon.v-icon.v-icon--svg{height:1.25rem;width:1.25rem}.v-stepper__step{align-items:center;display:flex;flex-direction:row;padding:24px;position:relative}.v-stepper__step--active .v-stepper__label{transition:.3s cubic-bezier(.4,0,.6,1)}.v-stepper__step--editable{cursor:pointer}.v-stepper__step.v-stepper__step--error .v-stepper__step__step{background:transparent;color:inherit}.v-stepper__step.v-stepper__step--error .v-stepper__step__step .v-icon{font-size:1.5rem;color:inherit}.v-stepper__step.v-stepper__step--error .v-stepper__label{color:inherit;text-shadow:none;font-weight:500}.v-stepper__step.v-stepper__step--error .v-stepper__label small{color:inherit}.v-stepper__label{align-items:flex-start;display:flex;flex-direction:column;line-height:1}.v-application--is-ltr .v-stepper__label{text-align:left}.v-application--is-rtl .v-stepper__label{text-align:right}.v-stepper__label small{font-size:.75rem;font-weight:300;text-shadow:none}.v-stepper__wrapper{overflow:hidden;transition:none}.v-stepper__content{top:0;padding:24px 24px 16px;flex:1 0 auto;width:100%}.v-stepper__content>.v-btn{margin:24px 8px 8px 0}.v-stepper--is-booted .v-stepper__content,.v-stepper--is-booted .v-stepper__wrapper{transition:.3s cubic-bezier(.25,.8,.5,1)}.v-stepper--vertical{padding-bottom:36px}.v-stepper--vertical .v-stepper__content{padding:16px 60px 16px 23px;width:auto}.v-application--is-ltr .v-stepper--vertical .v-stepper__content{margin:-8px -36px -16px 36px}.v-application--is-rtl .v-stepper--vertical .v-stepper__content{margin:-8px 36px -16px -36px}.v-stepper--vertical .v-stepper__step{padding:24px 24px 16px}.v-application--is-ltr .v-stepper--vertical .v-stepper__step__step{margin-right:12px}.v-application--is-rtl .v-stepper--vertical .v-stepper__step__step{margin-left:12px}.v-stepper--alt-labels .v-stepper__header{height:auto}.v-stepper--alt-labels .v-stepper__header .v-divider{margin:35px -67px 0;align-self:flex-start}.v-stepper--alt-labels .v-stepper__step{flex-direction:column;justify-content:flex-start;align-items:center;flex-basis:175px}.v-stepper--alt-labels .v-stepper__step small{align-self:center}.v-stepper--alt-labels .v-stepper__step__step{margin-bottom:11px;margin-left:0;margin-right:0}@media only screen and (max-width:959px){.v-stepper:not(.v-stepper--vertical) .v-stepper__label{display:none}.v-stepper:not(.v-stepper--vertical) .v-stepper__step__step{margin-left:0;margin-right:0}}",""]),e.exports=n},466:function(e,t,r){"use strict";r.r(t);r(21),r(46),r(173),r(48),r(40),r(14),r(381),r(16),r(49),r(35),r(88);var n=r(18),l=r(402),o=r(403),c=["prend le lead","démarre en tête","est en pôle position","prend l'initiative","mène la danse","prend les devants","ouvre le bal","se lance","lance les hostilités","a l'avantage","a la parole","fait le premier pas"],v={components:{Timer:l.default,TrelloViewer:o.default},asyncData:function(e){var t,r,n,l,o,v,d,h=e.redirect,m=e.app;try{d=JSON.parse(localStorage.getItem("settings"))}catch(e){d={}}if(!Array.isArray(d.participants)||!Number.isInteger(d.secondsPerPerson))return h({name:"index"});var _=null===(t=d)||void 0===t?void 0:t.participants.map((function(e){return e.trim()})).filter((function(e){return e}));if(0===_.length)return h({name:"index"});var f=null===(r=d)||void 0===r?void 0:r.dingFile,y=null===(n=d)||void 0===n?void 0:n.dingVolume,x=null;if(f&&Number.isInteger(y)&&y>0){var k,w,A=(null===(k=m.router)||void 0===k||null===(w=k.options)||void 0===w?void 0:w.base)||"";(x=new Audio("".concat(A).concat(f,".mp3"))).volume=Math.min(100,y/100)}return{randomizing:!1,turn:0,ding:x,names:_,participants:[],leadExpression:c[0],startTime:new Date,secondsPerPerson:d.secondsPerPerson,intervalId:null,trelloBoardId:null===(l=d)||void 0===l?void 0:l.trelloBoardId,trelloApiKey:null===(o=d)||void 0===o?void 0:o.trelloApiKey,trelloAccessToken:null===(v=d)||void 0===v?void 0:v.trelloAccessToken}},computed:{firstSpeaker:function(){return this.participants[0]},currentSpeaker:function(){return this.participants[this.turn-1]},isPlaying:function(){return!!this.intervalId},dailyIsOver:function(){return this.participants.every((function(p){return p.isDone}))},selectionIsOver:function(){return 0===this.names.length}},watch:{selectionIsOver:function(e){e&&(this.leadExpression=c[Math.floor(Math.random()*c.length)])}},beforeMount:function(){window.addEventListener("keydown",this.handleKeypress)},destroyed:function(){window.removeEventListener("keydown",this.handleKeypress),this.intervalId&&clearInterval(this.intervalId)},methods:{randomize:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.randomizing=!0;case 1:if(!(e.names.length>0)){t.next=8;break}return r=e.names[Math.floor(Math.random()*e.names.length)],e.addSpeaker(r),t.next=6,new Promise((function(e){setTimeout(e,300)}));case 6:t.next=1;break;case 8:e.randomizing=!1;case 9:case"end":return t.stop()}}),t)})))()},addSpeaker:function(e){this.names=this.names.filter((function(t){return t!==e})),this.participants.push({name:e,previousSpeakTime:0,totalSpeakTime:0,isDone:!1,timeExceeded:!1})},resetSpeakers:function(){this.names=this.participants.map((function(p){return p.name})),this.participants=[]},start:function(){var e=this;if(!this.dailyIsOver){var t=this.currentSpeaker;t&&(t.previousSpeakTime=t.totalSpeakTime,t.speakStart=new Date,this.intervalId=setInterval((function(){e.updateSpeakTime()}),1e3))}},pause:function(){clearInterval(this.intervalId),this.intervalId=null,this.speakStart=null,this.isSpeaking=!1},updateSpeakTime:function(){var e=this.currentSpeaker;if(e){var t=Date.now()-e.speakStart.getTime();e.totalSpeakTime=Math.floor(t/1e3)+e.previousSpeakTime,!e.timeExceeded&&e.totalSpeakTime>=this.secondsPerPerson&&(e.timeExceeded=!0,this.ding&&this.ding.play())}},setTurn:function(e){this.selectionIsOver&&(e<1&&(e=1),e>this.participants.length&&(e=this.participants.length+(this.dailyIsOver?1:0)),this.turn!==e&&(this.pause(),this.turn=e,this.start()))},nextTurn:function(){this.setTurn(this.turn+1)},prevTurn:function(){this.setTurn(this.turn-1)},nextSpeaker:function(){var e=this.participants.findIndex((function(p){return!p.isDone}));e>=0?this.setTurn(e+1):(this.pause(),this.turn=this.participants.length+1)},setSpeakerAsDone:function(){var e=this.currentSpeaker;e&&(e.isDone=!0,this.nextSpeaker())},handleKeypress:function(e){this.selectionIsOver&&("ArrowLeft"===e.key&&this.prevTurn(),"ArrowRight"===e.key&&this.nextTurn(),"t"===e.key&&this.setSpeakerAsDone(),"p"===e.key&&(this.isPlaying?this.pause():this.start()))}}},d=(r(447),r(70)),h=r(103),m=r.n(h),_=r(165),f=r(361),y=r(161),x=r(134),k=r(385),w=r(459),A=r(374),C=r(162),T=r(163),V=r(98),S=r(164),I=r(85),L=r(460),O=r(86),j=r(2),M=(r(449),r(105)),D=r(128),P=r(20),$=r(4),z=r(5);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var N=Object($.a)(Object(M.b)("stepper"),D.a,P.a).extend({name:"v-stepper",provide:function(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,vertical:Boolean},data:function(){var data={isBooted:!1,steps:[],content:[],isReverse:!1};return data.internalLazyValue=null!=this.value?this.value:(data[0]||{}).step||1,data},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(j.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear},this.themeClasses)}},watch:{internalValue:function(e,t){this.isReverse=Number(e)<Number(t),t&&(this.isBooted=!0),this.updateView()}},created:function(){this.$listeners.input&&Object(z.a)("@input","@change",this)},mounted:function(){this.updateView()},methods:{register:function(e){"v-stepper-step"===e.$options.name?this.steps.push(e):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content.push(e))},unregister:function(e){"v-stepper-step"===e.$options.name?this.steps=this.steps.filter((function(i){return i!==e})):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content=this.content.filter((function(i){return i!==e})))},stepClick:function(e){var t=this;this.$nextTick((function(){return t.internalValue=e}))},updateView:function(){for(var e=this.steps.length;--e>=0;)this.steps[e].toggle(this.internalValue);for(var t=this.content.length;--t>=0;)this.content[t].toggle(this.internalValue,this.isReverse)}},render:function(e){return e("div",{staticClass:"v-stepper",class:this.classes},this.$slots.default)}}),R=(r(64),r(0)),B=Object($.a)(Object(M.a)("stepper","v-stepper-content","v-stepper")).extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data:function(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition:function(){return(this.$vuetify.rtl?!this.isReverse:this.isReverse)?O.g:O.h},styles:function(){return this.isVertical?{height:Object(R.f)(this.height)}:{}}},watch:{isActive:function(e,t){e&&null==t?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted:function(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition:function(e){this.isActive&&"height"===e.propertyName&&(this.height="auto")},enter:function(){var e=this,t=0;requestAnimationFrame((function(){t=e.$refs.wrapper.scrollHeight})),this.height=0,setTimeout((function(){return e.isActive&&(e.height=t||"auto")}),450)},leave:function(){var e=this;this.height=this.$refs.wrapper.clientHeight,setTimeout((function(){return e.height=0}),10)},toggle:function(e,t){this.isActive=e.toString()===this.step.toString(),this.isReverse=t}},render:function(e){var t={staticClass:"v-stepper__content"},r={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(t.directives=[{name:"show",value:this.isActive}]);var n=e("div",r,[this.$slots.default]),content=e("div",t,[n]);return e(this.computedTransition,{on:this.$listeners},[content])}}),K=r(135),U=r(22),F=r(77),J=(Object($.a)(U.a,Object(M.a)("stepper","v-stepper-step","v-stepper")).extend().extend({name:"v-stepper-step",directives:{ripple:F.a},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:function(){return[]}},step:[Number,String]},data:function(){return{isActive:!1,isInactive:!0}},computed:{classes:function(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError:function(){return this.rules.some((function(e){return!0!==e()}))}},mounted:function(){this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.stepper&&this.stepper.unregister(this)},methods:{click:function(e){e.stopPropagation(),this.$emit("click",e),this.editable&&this.stepClick(this.step)},genIcon:function(e){return this.$createElement(K.a,e)},genLabel:function(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep:function(){var e=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(e,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent:function(){var e=[];return this.hasError?e.push(this.genIcon(this.errorIcon)):this.complete?this.editable?e.push(this.genIcon(this.editIcon)):e.push(this.genIcon(this.completeIcon)):e.push(String(this.step)),e},toggle:function(e){this.isActive=e.toString()===this.step.toString(),this.isInactive=Number(e)<Number(this.step)}},render:function(e){return e("div",{staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},[this.genStep(),this.genLabel()])}}),Object(R.h)("v-stepper__header"),Object(R.h)("v-stepper__items")),component=Object(d.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticStyle:{"max-width":"1000px"}},[r("v-btn",{staticClass:"mb-2",attrs:{text:"",to:{path:"/"}}},[r("v-icon",{attrs:{left:""}},[e._v("\n      mdi-arrow-left\n    ")]),e._v("\n    Retour\n  ")],1),e._v(" "),r("v-row",{attrs:{justify:"center",align:"stretch"}},[r("v-col",{staticClass:"shrink"},[r("v-card",{attrs:{"min-height":"100%"}},[r("v-card-title",[e._v("\n          Participants\n        ")]),e._v(" "),r("v-list",{attrs:{"min-width":"200"}},[r("v-scale-transition",{attrs:{group:""}},e._l(e.participants,(function(t,n){return r("v-list-item",{key:t.name,on:{click:function(t){return e.setTurn(n+1)}}},[r("v-list-item-avatar",[t.isDone?r("v-avatar",{attrs:{size:"32",color:"primary"}},[r("v-icon",{attrs:{dark:""}},[e._v("\n                    mdi-check\n                  ")])],1):e.turn===n+1?r("v-avatar",{attrs:{size:"32",color:"primary"}},[r("v-icon",{attrs:{small:"",dark:""}},[e._v("\n                    mdi-account-voice\n                  ")])],1):r("v-avatar",{attrs:{size:"32",color:"grey white--text"}},[e._v("\n                  "+e._s(n+1)+"\n                ")])],1),e._v(" "),r("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1)],1)],1),e._v(" "),r("v-col",[r("v-stepper",{model:{value:e.turn,callback:function(t){e.turn=t},expression:"turn"}},[r("v-stepper-items",[r("v-stepper-content",{attrs:{step:0}},[r("v-scroll-y-transition",{attrs:{mode:"out-in",appear:""}},[e.selectionIsOver?r("v-card",{key:"afterShuffle",staticClass:"py-15 text-center"},[r("div",{staticClass:"text-h2"},[e._v("\n                  Les jeux sont faits !\n                ")]),e._v(" "),r("div",{staticClass:"mt-6 headline"},[r("strong",[e._v(e._s(e.firstSpeaker.name))]),e._v(" "+e._s(e.leadExpression)+"\n                ")]),e._v(" "),r("div",{staticClass:"mt-6"},[r("v-btn",{attrs:{"x-large":"",color:"primary"},on:{click:function(t){return e.setTurn(1)}}},[r("v-icon",{attrs:{left:""}},[e._v("\n                      mdi-flag-checkered\n                    ")]),e._v("\n                    C'est parti !\n                  ")],1)],1),e._v(" "),r("div",{staticClass:"mt-6"},[r("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:e.resetSpeakers}},[e._v("\n                    Refaire le tirage\n                  ")])],1)]):r("v-card",{key:"beforeShuffle",staticClass:"py-15 text-center"},[r("div",{staticClass:"headline"},[e._v("\n                  Avant tout, décidons d'un ordre.\n                ")]),e._v(" "),r("v-btn",{staticClass:"my-4",attrs:{color:"primary",loading:e.randomizing},on:{click:e.randomize}},[r("v-icon",{attrs:{left:""}},[e._v("\n                    mdi-shuffle\n                  ")]),e._v("\n                  Tirer au sort\n                ")],1),e._v(" "),r("div",[r("v-scale-transition",{attrs:{group:""}},e._l(e.names,(function(t){return r("v-chip",{key:t,staticClass:"ma-1",attrs:{label:""},on:{click:function(r){return e.addSpeaker(t)}}},[e._v("\n                      "+e._s(t)+"\n                    ")])})),1)],1)],1)],1)],1),e._v(" "),e._l(e.participants,(function(t,n){return r("v-stepper-content",{key:t.name,attrs:{step:n+1}},[r("v-card",{staticClass:"pa-12 text-center"},[r("div",{staticClass:"text-h2"},[e._v("\n                "+e._s(t.name)+"\n              ")]),e._v(" "),r("Timer",{attrs:{"used-time":t.totalSpeakTime,"available-time":e.secondsPerPerson}}),e._v(" "),r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"shrink"},[r("v-btn",{attrs:{"x-large":"",icon:"",color:"primary",disabled:e.turn<=1},on:{click:function(t){return e.setTurn(e.turn-1)}}},[r("v-icon",[e._v("mdi-arrow-left")])],1)],1),e._v(" "),r("v-col",{staticClass:"shrink"},[e.isPlaying?r("v-btn",{attrs:{large:"",fab:"",color:"primary"},on:{click:e.pause}},[r("v-icon",[e._v("mdi-pause")])],1):r("v-btn",{attrs:{large:"",fab:"",color:"primary",disabled:e.dailyIsOver},on:{click:e.start}},[r("v-icon",[e._v("mdi-play")])],1)],1),e._v(" "),r("v-col",{staticClass:"shrink"},[r("v-btn",{attrs:{"x-large":"",icon:"",color:"primary",disabled:!e.dailyIsOver&&e.turn>=e.participants.length},on:{click:function(t){return e.setTurn(e.turn+1)}}},[r("v-icon",[e._v("mdi-arrow-right")])],1)],1)],1),e._v(" "),r("v-btn",{staticClass:"mt-4",attrs:{outlined:"",color:"primary"},on:{click:e.setSpeakerAsDone}},[e._v("\n                J'ai fini\n              ")])],1)],1)})),e._v(" "),r("v-stepper-content",{attrs:{step:e.participants.length+1}},[r("v-card",{staticClass:"py-15 text-center"},[r("div",{staticClass:"text-h2"},[e._v("\n                Daily\n              ")]),e._v(" "),r("v-icon",{staticClass:"my-6",attrs:{size:"64"}},[e._v("\n                mdi-check-circle-outline\n              ")]),e._v(" "),r("div",{staticClass:"text-h2"},[e._v("\n                terminé\n              ")])],1)],1)],2)],1)],1)],1),e._v(" "),r("v-row",[r("v-col",[e.trelloBoardId?r("TrelloViewer",{attrs:{"board-id":e.trelloBoardId,"api-key":e.trelloApiKey,"access-token":e.trelloAccessToken}}):e._e()],1)],1)],1)}),[],!1,null,"152d6a28",null);t.default=component.exports;m()(component,{Timer:r(402).default,TrelloViewer:r(403).default}),m()(component,{VAvatar:_.a,VBtn:f.a,VCard:y.a,VCardTitle:x.d,VChip:k.a,VCol:w.a,VContainer:A.a,VIcon:C.a,VList:T.a,VListItem:V.a,VListItemAvatar:S.a,VListItemTitle:I.c,VRow:L.a,VScaleTransition:O.d,VScrollYTransition:O.e,VStepper:N,VStepperContent:B,VStepperItems:J})}}]);