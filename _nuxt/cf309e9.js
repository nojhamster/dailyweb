(window.webpackJsonp=window.webpackJsonp||[]).push([[10,7,9],{375:function(e,t,r){"use strict";r.r(t);r(21),r(14);var l={props:{size:{type:Number,default:function(){return 32}},color:{type:String,default:function(){return"primary"}},member:{type:Object,default:function(){return{}}}},computed:{avatarUrl:function(){var e,t;return(null===(e=this.member)||void 0===e?void 0:e.avatarUrl)&&"".concat(null===(t=this.member)||void 0===t?void 0:t.avatarUrl,"/50.png")},fullName:function(){var e;return null===(e=this.member)||void 0===e?void 0:e.fullName},username:function(){var e;return null===(e=this.member)||void 0===e?void 0:e.username},initials:function(){var e;return null===(e=this.member)||void 0===e?void 0:e.initials},combinedName:function(){return"".concat(this.fullName," (").concat(this.username,")")}}},n=r(70),o=r(103),c=r.n(o),d=r(165),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-avatar",{attrs:{size:e.size,color:e.color,title:e.combinedName}},[e.avatarUrl?r("img",{attrs:{src:e.avatarUrl,alt:e.fullName}}):r("span",{domProps:{textContent:e._s(e.initials)}})])}),[],!1,null,null,null);t.default=component.exports;c()(component,{VAvatar:d.a})},378:function(e,t,r){"use strict";r.r(t);r(46),r(72);var l=r(383),n=r.n(l),o=r(384),c=r.n(o),d={components:{TrelloAvatar:r(375).default},props:{lists:{type:Array,default:function(){return[]}},members:{type:Array,default:function(){return[]}},labels:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,card:null}},computed:{list:function(){var e=this;return Array.isArray(this.lists)&&this.card?this.lists.find((function(t){return t.id===e.card.idList})):null},cardMembers:function(){var e,t=this;return Array.isArray(this.members)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idMembers)?this.members.filter((function(e){return t.card.idMembers.find((function(t){return t===e.id}))})):null},cardLabels:function(){var e,t=this;return Array.isArray(this.labels)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idLabels)?this.labels.filter((function(label){return t.card.idLabels.find((function(e){return e===label.id}))})):null},htmlDesc:function(){return c.a.sanitize(n()(this.card.desc))}},methods:{showCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.card=e,this.show=!0}}},v=r(70),m=r(103),f=r.n(m),h=r(161),_=r(134),y=r(385),A=r(455),C=r(373),L=r(456),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"900"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.card?r("v-card",[r("v-card-title",[e._v("\n      "+e._s(e.card.name)+"\n    ")]),e._v(" "),e.list?r("v-card-subtitle",[e._v("\n      Dans la liste "+e._s(e.list.name)+"\n    ")]):e._e(),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",[r("div",{staticClass:"subtitle-1"},[e._v("\n            Membres\n          ")]),e._v(" "),e._l(e.cardMembers,(function(e){return r("TrelloAvatar",{key:e.id,staticClass:"mr-1 my-1",attrs:{member:e,size:32,color:"primary"}})}))],2),e._v(" "),r("v-col",[r("div",{staticClass:"subtitle-1"},[e._v("\n            Étiquettes\n          ")]),e._v(" "),e._l(e.cardLabels,(function(label){return r("v-chip",{key:label.id,staticClass:"mr-1 my-1",attrs:{color:label.color,label:""}},[e._v("\n            "+e._s(label.name)+"\n          ")])}))],2)],1)],1),e._v(" "),r("v-card-title",[e._v("\n      Description\n    ")]),e._v(" "),e.htmlDesc?r("v-card-text",{domProps:{innerHTML:e._s(e.htmlDesc)}}):r("v-card-text",[r("p",[e._v("Pas de description")])])],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{TrelloAvatar:r(375).default}),f()(component,{VCard:h.a,VCardSubtitle:_.b,VCardText:_.c,VCardTitle:_.d,VChip:y.a,VCol:A.a,VDialog:C.a,VRow:L.a})},379:function(e,t,r){"use strict";r.r(t);r(46),r(72);var l={components:{TrelloAvatar:r(375).default},props:{lists:{type:Array,default:function(){return[]}},members:{type:Array,default:function(){return[]}},labels:{type:Array,default:function(){return[]}},card:{type:Object,default:function(){return{}}}},computed:{list:function(){var e=this;return Array.isArray(this.lists)&&this.card?this.lists.find((function(t){return t.id===e.card.idList})):null},cardMembers:function(){var e,t=this;return Array.isArray(this.members)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idMembers)?this.members.filter((function(e){return t.card.idMembers.find((function(t){return t===e.id}))})):null},cardLabels:function(){var e,t=this;return Array.isArray(this.labels)&&Array.isArray(null===(e=this.card)||void 0===e?void 0:e.idLabels)?this.labels.filter((function(label){return t.card.idLabels.find((function(e){return e===label.id}))})):null}},methods:{}},n=r(70),o=r(103),c=r.n(o),d=r(361),v=r(161),m=r(134),f=r(385),h=r(162),_=r(371),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v("\n    "+e._s(e.card.name)+"\n  ")]),e._v(" "),e.list?r("v-card-subtitle",[e._v("\n    Dans la liste "+e._s(e.list.name)+"\n  ")]):e._e(),e._v(" "),e.cardLabels.length>0?r("v-card-text",e._l(e.cardLabels,(function(label){return r("v-chip",{key:label.id,staticClass:"mr-1 my-1",attrs:{color:label.color,small:"",label:""}},[e._v("\n      "+e._s(label.name)+"\n    ")])})),1):e._e(),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{text:"",href:e.card.url,target:"_blank"}},[r("v-icon",{attrs:{left:""}},[e._v("\n        mdi-trello\n      ")]),e._v("\n      Voir sur Trello\n    ")],1),e._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("showDetails",e.card)}}},[r("v-icon",{attrs:{left:""}},[e._v("\n        mdi-eye-outline\n      ")]),e._v("\n      Détails\n    ")],1),e._v(" "),r("v-spacer"),e._v(" "),e._l(e.cardMembers,(function(e){return r("TrelloAvatar",{key:e.id,staticClass:"mr-1 my-1",attrs:{member:e,size:32,color:"primary"}})}))],2)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{TrelloAvatar:r(375).default}),c()(component,{VBtn:d.a,VCard:v.a,VCardActions:m.a,VCardSubtitle:m.b,VCardText:m.c,VCardTitle:m.d,VChip:f.a,VIcon:h.a,VSpacer:_.a})},403:function(e,t,r){"use strict";r.r(t);r(21),r(46),r(34),r(73),r(40),r(24),r(41),r(171),r(87);var l=r(18),n=r(378),o=r(379),c={components:{TrelloCardDialog:n.default,TrelloCard:o.default},props:{boardId:{type:String,default:function(){return""}},apiKey:{type:String,default:function(){return""}},accessToken:{type:String,default:function(){return""}}},data:function(){return{search:"",board:null,loading:!1,error:null,selectedMembers:[],selectedLists:[],selectedLabels:[]}},computed:{boardName:function(){var e;return null===(e=this.board)||void 0===e?void 0:e.name},hasError:function(){return!!this.error},errorMessage:function(){var e;return null===(e=this.error)||void 0===e?void 0:e.message},lists:function(){var e;return Array.isArray(null===(e=this.board)||void 0===e?void 0:e.lists)?this.board.lists:[]},labels:function(){var e;return Array.isArray(null===(e=this.board)||void 0===e?void 0:e.labels)?this.board.labels:[]},members:function(){var e;return Array.isArray(null===(e=this.board)||void 0===e?void 0:e.members)?this.board.members:[]},cards:function(){var e,t=this,r=Array.isArray(null===(e=this.board)||void 0===e?void 0:e.cards)?this.board.cards:[],l=this.search.toLowerCase();return r.sort((function(a,b){return a.dateLastActivity<b.dateLastActivity?1:-1})).filter((function(e){if(l&&!e.name.toLowerCase().includes(l))return!1;if(t.selectedLists.length>0&&!t.selectedLists.includes(e.idList))return!1;if(t.selectedMembers.length>0){if(!Array.isArray(e.idMembers))return!1;if(!t.selectedMembers.some((function(t){return e.idMembers.includes(t)})))return!1}if(t.selectedLabels.length>0){if(!Array.isArray(e.idLabels))return!1;if(!t.selectedLabels.some((function(t){return e.idLabels.includes(t)})))return!1}return!0})).slice(0,25)}},mounted:function(){this.boardId&&this.fetchCards()},methods:{showCard:function(e){this.$refs.cardViewer.showCard(e)},fetchCards:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.error=null,r={},e.apiKey&&e.accessToken&&(r.Authorization='OAuth oauth_consumer_key="'.concat(e.apiKey,'", oauth_token="').concat(e.accessToken,'"')),t.prev=4,t.next=7,e.$axios.get("https://api.trello.com/1/boards/".concat(e.boardId),{headers:r,params:{cards:"visible",lists:"open",members:"all",labels:"all",label_fields:"name,color",member_fields:"username,avatarUrl,fullName,initials",card_fields:"name,desc,url,dateLastActivity,idList,idMembers,idLabels",list_fields:"name"}});case 7:l=t.sent,e.board=l.data,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),e.error=t.t0;case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[4,11]])})))()}}},d=r(70),v=r(103),m=r.n(v),f=r(464),h=r(361),_=r(161),y=r(134),A=r(455),C=r(456),L=r(461),V=r(371),x=r(452),T=r(457),w=r(458),k=r(39),M=r(170),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.boardId?r("v-card",[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[e._v("\n      "+e._s(e.boardName)+"\n    ")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{staticClass:"mr-3",staticStyle:{"max-width":"200px"},attrs:{name:"search",label:"Recherche",solo:"",dense:"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.fetchCards}},[e._v("\n      Actualiser\n    ")])],1),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-select",{attrs:{items:e.lists,"item-text":"name","item-value":"id",label:"Listes","hide-details":"",outlined:"",multiple:""},model:{value:e.selectedLists,callback:function(t){e.selectedLists=t},expression:"selectedLists"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-select",{attrs:{items:e.members,"item-text":"fullName","item-value":"id",label:"Membres","hide-details":"",outlined:"",multiple:""},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-select",{attrs:{items:e.labels,"item-text":"name","item-value":"id",label:"Étiquettes","hide-details":"",outlined:"",multiple:""},model:{value:e.selectedLabels,callback:function(t){e.selectedLabels=t},expression:"selectedLabels"}})],1)],1)],1),e._v(" "),r("v-card-title",[e._v("\n    Activité\n  ")]),e._v(" "),r("v-card-text",[r("v-alert",{attrs:{type:"error",outlined:"",value:e.hasError}},[e._v("\n      Le chargement de l'activité Trello a échoué.\n      "),r("pre",[e._v(e._s(e.errorMessage))])]),e._v(" "),e.cards.length>0?r("v-timeline",{attrs:{dense:""}},e._l(e.cards,(function(t){return r("v-timeline-item",{key:t.id,attrs:{small:""}},[r("TrelloCard",{attrs:{card:t,lists:e.lists,members:e.members,labels:e.labels},on:{showDetails:function(r){return e.showCard(t)}}})],1)})),1):e._e()],1),e._v(" "),r("TrelloCardDialog",{ref:"cardViewer",attrs:{lists:e.lists,members:e.members,labels:e.labels}})],1):e._e()}),[],!1,null,null,null);t.default=component.exports;m()(component,{TrelloCard:r(379).default,TrelloCardDialog:r(378).default}),m()(component,{VAlert:f.a,VBtn:h.a,VCard:_.a,VCardText:y.c,VCardTitle:y.d,VCol:A.a,VRow:C.a,VSelect:L.a,VSpacer:V.a,VTextField:x.a,VTimeline:T.a,VTimelineItem:w.a,VToolbar:k.a,VToolbarTitle:M.a})}}]);